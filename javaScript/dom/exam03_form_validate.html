<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      function handleCheckData() {
        let checkDataResult = true;
        event.preventDefault();

        //ID 유효성 검사
        /*
                / - start of regex
                ^ - start of line
                $ - end of line
                / - end of regex

                /.../ : ...을 포함하고 있으면 true
                /^...$/ : ...이 전확히 일치한다면 true
            */
        var uidPattern = /^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z]).{6,10}$/;
        let uid = document.querySelector("#uid").value; //id로 값 가져오기.

        var uidPatternTest = uidPattern.test(uid);
        if (uidPatternTest) {
          document.joinForm.uid.classList.remove("bg-danger");
        } else {
          document.joinForm.uid.classList.add("bg-danger");
          checkDataResult = false;
        }

        //Email 유효성 검사
        //이메일 검사
        var emailPattern = /^[a-zA-Z0-9+-\_.]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/;
        var email = document.querySelector("#email").value;
        var emailPatternTest = emailPattern.test(email);
        if (emailPatternTest) {
          document.querySelector("#email").classList.remove("bg-danger");
        } else {
          document.querySelector("#email").classList.add("bg-danger");
          checkDataResult = false;
        }

        //Password 유효성 검사
        var passwordPattern = /^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z]).{8,15}$/;
        // var passwordPattern = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,15}$/;
        var password = document.querySelector("#password").value;
        var passwordPatternTest = passwordPattern.test(password);
        if (passwordPatternTest) {
          document.querySelector("#password").classList.remove("bg-danger");
        } else {
          document.querySelector("#password").classList.add("bg-danger");
          checkDataResult = false;
        }

        //Phone 유효성 검사
        var phonePattern = /^010-\d{3,4}-\d{4}$/;
        var phone = document.querySelector("#phone").value;
        var phonePatternTest = phonePattern.test(phone);
        if (phonePatternTest) {
          document.querySelector("#phone").classList.remove("bg-danger");
        } else {
          document.querySelector("#phone").classList.add("bg-danger");
          checkDataResult = false;
        }

        //모든 유효성 검사를 통과한다면,
        if(checkDataResult) document.querySelector("#joinForm").submit();
      }
    </script>
  </head>
  <body>
    <div class="card">
      <div class="card-header">Form Validate(입력값 유효성 검사)</div>

      <div class="card-body">
        <form id="joinForm" name="joinForm" action="#" onsubmit="handleCheckData()" novalidate>
          <div class="form-group">
            <label for="uid">진료일</label>
            <input type="text" class="form-control" id="uid" name="uid" value="Abc123" />
            <small id="uidHelp" class="form-text text-muted">알파벳 대소문자, 숫자를 혼용해서 6자 이상 10자 이하</small>
          </div>

          <div class="form-group">
            <label for="email">진료 내용</label>
            <input type="email" class="form-control" id="email" name="email" />
          </div>

          <div class="form-group">
            <label for="password">의사 코멘트</label>
            <input type="password" class="form-control" id="password" name="password" value="Abc12345" />
            <small id="passwordHelp" class="form-text text-muted">알파벳 대소문자, 숫자를 혼용해서 8자이상 15자이하</small>
          </div>

          <div class="form-group">
            <label for="phone">의사 코멘트</label>
            <input type="text" class="form-control" id="phone" />
            <small id="phoneHelp" class="form-text text-muted">예) 010-123-1234, 010-1234-1234</small>
          </div>

          <div class="form-group">
            <label for="city">City</label>
            <select id="city" name="city" class="form-control">
              <option selected value="seoul">서울</option>
              <option value="pusan">부산</option>
              <option value="jeju">제주</option>
            </select>
          </div>

          <div class="form-group">
            <label for="city">시술유형</label>
            <div class="form-check">
              <input type="checkbox" name="hobby" value="movie" />
              <label> 임플란트 </label>
              <input type="checkbox" name="hobby" value="trip" />
              <label> 크라운 </label>
              <input type="checkbox" name="hobby" value="game" />
              <label> 사랑니 발치 </label>
            </div>
          </div>

          <div class="form-group">
            <label for="city">Job</label>
            <div class="form-check">
              <input type="radio" name="job" value="developer" />
              <label> 개발자 </label>
              <input type="radio" name="job" value="designer" checked />
              <label> 디자이너 </label>
              <input type="radio" name="job" value="manager" />
              <label> 매니저 </label>
            </div>
          </div>
          <div class="text-center">
            <input type="submit" class="btn btn-primary" value="Join" />
            <input type="reset" class="btn btn-primary" value="Reset" />
          </div>
        </form>
      </div>
    </div>
  </body>
</html>
